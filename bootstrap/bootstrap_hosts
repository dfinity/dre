# Node layout for testing bootstrapping Mercury
# =============================================
#
# Topology: https://docs.google.com/drawings/d/1ynBb4EVqeVQQA_ELT55PNYkSQGdnYqfLxCy9Kr4lH0M/edit

[prometheus]
prometheus.dfinity.systems stage=all

[prometheus:vars]
# Note: The port must be different for each network
ic_p8s_service_discovery_metrics_addr=[2a05:d01c:e2c:a700:dfde:e933:cb63:f106]:8033

[ic_fe]
fe stage=all ansible_host=bootstrap-zh2-spm07-25.dfinity.systems listen_addr=[2a00:fb01:400:100:5054:ffff:fe0a:6519]:8002 metrics_addr=[2a00:fb01:400:100:5054:ffff:fe0a:6519]:8004

[nns]
nns.0.411 node_index=411 dfinity_node=yes stage=all ansible_host=bootstrap-zh2-spm02-20.dfinity.systems ipv6=2a00:fb01:400:100:5054:ffff:fe0a:6514 ipv4=10.10.101.20

[nns:vars]
subnet_index=0

[subnets:children]
subnet_1
subnet_2

[subnet_1]
#nodes to be added to "old" NNS
bootstrap.n-nns1-01 node_index=1 dfinity_node=yes stage=all ansible_host=bootstrap-zh2-spm03-21.dfinity.systems ipv6=2a00:fb01:400:100:5054:ffff:fe0a:6515 ipv4=10.10.101.21
bootstrap.n-nns1-03 node_index=3 dfinity_node=yes stage=all ansible_host=bootstrap-sj1-spm05-20.dfinity.systems ipv6=2600:c02:b002:15:5054:ffff:fe0a:6914  ipv4=10.10.105.20

[subnet_1:vars]
subnet_index=1

[subnet_2]
#nodes to form "new" NNS
bootstrap.n-nns2-01 node_index=4 dfinity_node=yes stage=all ansible_host=bootstrap-zh2-spm05-23.dfinity.systems ipv6=2a00:fb01:400:100:5054:ffff:fe0a:6517   ipv4=10.10.101.23
bootstrap.n-nns2-03 node_index=6 dfinity_node=yes stage=all ansible_host=bootstrap-sj1-spm06-21.dfinity.systems ipv6=2600:c02:b002:15:5054:ffff:fe0a:6915    ipv4=10.10.105.21

[subnet_2:vars]
subnet_index=2

[nodes:children]
subnet_1
subnet_2
nns

[nodes:vars]
p2p_listen_port=4100
p2p_listen_ip={{ipv6}}
p2p_listen_addr=[{{p2p_listen_ip}}]:{{p2p_listen_port}}

p2p_receive_queues=10000
p2p_send_queues=10000

dkg_interval_length=99

xnet_listen_port=2497
xnet_listen_ip={{ipv6}}
xnet_listen_addr=[{{xnet_listen_ip}}]:{{xnet_listen_port}}

api_listen_port=8080
api_listen_ip={{ipv6}}
api_listen_addr=[{{api_listen_ip}}]:{{api_listen_port}}
api_listen_protocol=https
api_listen_url={{api_listen_protocol}}://{{api_listen_addr}}

metrics_listen_port=9090
metrics_listen_ip={{ipv6}}
metrics_listen_addr=[{{metrics_listen_ip}}]:{{metrics_listen_port}}

[all:vars]
ansible_connection=ssh
