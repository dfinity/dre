name: Prepare test artifacts
description: Prepare artifacts used for tests 

runs:
  using: composite
  steps:
    - name: "⚒️ Extract binaries required for tests from bazel"
      shell: bash
      run: |
        set -eExuo pipefail
        mkdir -p test-artifacts
        cp --dereference bazel-out/k8-opt/bin/rs/ic-observability/multiservice-discovery/multiservice-discovery test-artifacts/dre

    - name: "📦 Upload test artifacts"
      uses: actions/upload-artifact@v4
      with:
        name: test-artifacts
        path: test-artifacts/dre
